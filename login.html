<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ƒêƒÉng nh·∫≠p | ChemCloud</title>
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      min-height: 100vh;
      font-family: 'Segoe UI', Arial, sans-serif;
      background: linear-gradient(to bottom, #d5f0ff, #f0f9ff);
      color: #0f172a;
    }

    .wrap {
      max-width: 1100px;
      margin: 0 auto;
      min-height: 100vh;
      display: grid;
      grid-template-columns: 0.95fr 1.05fr;
      gap: 24px;
      padding: 26px;
      align-items: center;
    }

    .left-panel {
      background: #ffffff;
      border-radius: 18px;
      padding: 24px;
      box-shadow: 0 10px 24px rgba(0,0,0,0.1);
      min-height: 520px;
      position: relative;
      overflow: hidden;
    }

    .left-panel h2 {
      margin: 0;
      color: #2563eb;
      font-size: 34px;
    }

    .left-panel p {
      color: #475569;
      margin-top: 10px;
      line-height: 1.6;
      font-size: 18px;
    }

    .bubble {
      position: absolute;
      border-radius: 999px;
      border: 2px dashed rgba(37,99,235,0.25);
    }
    .bubble.one { width: 280px; height: 280px; bottom: -40px; right: -30px; }
    .bubble.two { width: 180px; height: 180px; top: 120px; left: -40px; }

    .left-chip {
      margin-top: 18px;
      background: #eff6ff;
      color: #1e40af;
      padding: 12px 14px;
      border-radius: 12px;
      font-weight: 600;
      width: fit-content;
    }

    .login-card {
      background: #ffffff;
      border-radius: 18px;
      border: 1px solid #bfdbfe;
      padding: 28px;
      box-shadow: 0 12px 24px rgba(0,0,0,0.12);
    }

    .brand {
      text-align: center;
      margin-bottom: 20px;
    }

    .brand h1 {
      margin: 0;
      font-size: 38px;
      color: #1d4ed8;
    }

    .brand p {
      margin: 8px 0 0;
      color: #64748b;
      font-size: 16px;
    }

    .field { margin-bottom: 14px; }

    label {
      display: block;
      margin-bottom: 6px;
      color: #1e3a8a;
      font-weight: 600;
    }

    input {
      width: 100%;
      border: 1px solid #93c5fd;
      border-radius: 10px;
      padding: 12px;
      font-size: 16px;
      outline: none;
    }

    input:focus { border-color: #2563eb; }

    .password-row {
      display: grid;
      grid-template-columns: 1fr auto;
      gap: 10px;
      align-items: center;
    }

    .toggle-btn {
      border: none;
      background: #dbeafe;
      color: #1e40af;
      border-radius: 10px;
      padding: 11px 12px;
      cursor: pointer;
      font-weight: 600;
    }

    .submit-btn {
      width: 100%;
      margin-top: 8px;
      border: none;
      border-radius: 10px;
      padding: 12px;
      font-size: 20px;
      font-weight: 700;
      color: #fff;
      background: linear-gradient(90deg, #1e40af, #2563eb);
      cursor: pointer;
    }

    .submit-btn:hover { opacity: 0.95; }

    .divider {
      margin: 14px 0;
      display: flex;
      align-items: center;
      gap: 10px;
      color: #64748b;
      font-size: 13px;
    }

    .divider::before,
    .divider::after {
      content: "";
      flex: 1;
      height: 1px;
      background: #cbd5e1;
    }

    #googleSignInBtn {
      display: flex;
      justify-content: center;
      margin-bottom: 10px;
    }

    .hint {
      margin-top: 14px;
      color: #334155;
      font-size: 14px;
      line-height: 1.5;
    }

    .result {
      margin-top: 10px;
      min-height: 26px;
      font-weight: 700;
      white-space: pre-wrap;
    }

    .footer-link {
      margin-top: 14px;
      text-align: center;
    }

    .footer-link a {
      color: #1d4ed8;
      font-weight: 700;
      text-decoration: none;
    }

    @media (max-width: 980px) {
      .wrap { grid-template-columns: 1fr; }
      .left-panel { min-height: 260px; }
    }
  </style>
</head>
<body>
  <main class="wrap">
    <section class="left-panel" aria-hidden="true">
      <h2>üîê ƒêƒÉng nh·∫≠p ChemCloud</h2>
      <p>ƒê·ªìng b·ªô v·ªõi giao di·ªán h·ªá th·ªëng h·ªçc H√≥a h·ªçc. B·∫°n c√≥ th·ªÉ ƒëƒÉng nh·∫≠p b·∫±ng t√†i kho·∫£n n·ªôi b·ªô ho·∫∑c Gmail.</p>
      <div class="left-chip">üí° Sau khi ƒëƒÉng nh·∫≠p th√†nh c√¥ng s·∫Ω chuy·ªÉn ƒë·∫øn: <b>index.html</b></div>
      <div class="bubble one"></div>
      <div class="bubble two"></div>
    </section>

    <section class="login-card">
      <div class="brand">
        <h1>ChemCloud</h1>
        <p>Ch√†o m·ª´ng b·∫°n tr·ªü l·∫°i! Vui l√≤ng ƒëƒÉng nh·∫≠p ƒë·ªÉ ti·∫øp t·ª•c.</p>
      </div>

      <form id="loginForm">
        <div class="field">
          <label for="email">Email</label>
          <input id="email" type="email" placeholder="Nh·∫≠p ƒë·ªãa ch·ªâ email c·ªßa b·∫°n" required />
        </div>

        <div class="field">
          <label for="password">M·∫≠t kh·∫©u</label>
          <div class="password-row">
            <input id="password" type="password" placeholder="Nh·∫≠p m·∫≠t kh·∫©u c·ªßa b·∫°n" required />
            <button id="togglePassword" type="button" class="toggle-btn">Hi·ªán</button>
          </div>
        </div>

        <button class="submit-btn" type="submit">ƒêƒÉng nh·∫≠p</button>
      </form>

      <div class="divider">ho·∫∑c ƒëƒÉng nh·∫≠p b·∫±ng Gmail</div>
      <div id="googleSignInBtn"></div>

      <div id="result" class="result"></div>
      <p class="hint">
        Demo t√†i kho·∫£n: <b>teacher@chemcloud.vn</b> / <b>123456</b>.<br>
        ƒê·ªÉ b·∫≠t Gmail Login, thay <code>GOOGLE_CLIENT_ID</code> b√™n d∆∞·ªõi b·∫±ng client ID t·ª´ Google Cloud Console.
      </p>
      <div class="footer-link"><a href="index.html">‚¨Ö Quay v·ªÅ trang ch√≠nh</a></div>
    </section>
  </main>

  <script src="https://accounts.google.com/gsi/client" async defer></script>
  <script>
    const LOGIN_SUCCESS_REDIRECT = 'index.html';
    const GOOGLE_CLIENT_ID = 'PASTE_GOOGLE_CLIENT_ID_HERE.apps.googleusercontent.com';

    const loginForm = document.getElementById('loginForm');
    const result = document.getElementById('result');
    const togglePassword = document.getElementById('togglePassword');
    const passwordInput = document.getElementById('password');

    function saveLoginSession(payload) {
      localStorage.setItem('chemcloud_login', JSON.stringify({
        ...payload,
        at: Date.now()
      }));
    }

    function showResult(message, ok = false) {
      result.style.color = ok ? '#166534' : '#b91c1c';
      result.textContent = message;
    }

    function redirectAfterLogin() {
      setTimeout(() => window.location.href = LOGIN_SUCCESS_REDIRECT, 900);
    }

    togglePassword.addEventListener('click', () => {
      const isHidden = passwordInput.type === 'password';
      passwordInput.type = isHidden ? 'text' : 'password';
      togglePassword.textContent = isHidden ? '·∫®n' : 'Hi·ªán';
    });

    loginForm.addEventListener('submit', (e) => {
      e.preventDefault();
      const email = document.getElementById('email').value.trim();
      const password = passwordInput.value.trim();

      if (email === 'teacher@chemcloud.vn' && password === '123456') {
        saveLoginSession({ email, role: 'teacher', provider: 'password' });
        showResult('‚úÖ ƒêƒÉng nh·∫≠p th√†nh c√¥ng! ƒêang chuy·ªÉn trang...', true);
        redirectAfterLogin();
      } else {
        showResult('‚ùå Sai email ho·∫∑c m·∫≠t kh·∫©u. Vui l√≤ng th·ª≠ l·∫°i.');
      }
    });

    function parseJwt(token) {
      const base64 = token.split('.')[1];
      const json = atob(base64.replace(/-/g, '+').replace(/_/g, '/'));
      return JSON.parse(decodeURIComponent(Array.prototype.map.call(json, c => '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2)).join('')));
    }

    function handleGoogleCredentialResponse(response) {
      try {
        const profile = parseJwt(response.credential);
        saveLoginSession({
          email: profile.email,
          name: profile.name,
          provider: 'google'
        });
        showResult(`‚úÖ ƒêƒÉng nh·∫≠p Gmail th√†nh c√¥ng: ${profile.email}\nƒêang chuy·ªÉn trang...`, true);
        redirectAfterLogin();
      } catch (err) {
        showResult('‚ùå Kh√¥ng x·ª≠ l√Ω ƒë∆∞·ª£c ph·∫£n h·ªìi Gmail Login.');
      }
    }

    window.addEventListener('load', () => {
      if (!window.google || !google.accounts || !google.accounts.id) {
        showResult('‚ö†Ô∏è Kh√¥ng t·∫£i ƒë∆∞·ª£c Google Sign-In. Ki·ªÉm tra k·∫øt n·ªëi m·∫°ng.', false);
        return;
      }

      if (GOOGLE_CLIENT_ID.includes('PASTE_GOOGLE_CLIENT_ID_HERE')) {
        showResult('‚ö†Ô∏è Gmail Login ch∆∞a b·∫≠t: c·∫ßn thay GOOGLE_CLIENT_ID trong login.html.', false);
        return;
      }

      google.accounts.id.initialize({
        client_id: GOOGLE_CLIENT_ID,
        callback: handleGoogleCredentialResponse
      });

      google.accounts.id.renderButton(document.getElementById('googleSignInBtn'), {
        theme: 'outline',
        size: 'large',
        width: 330,
        text: 'continue_with'
      });
    });
  </script>
</body>
</html>
